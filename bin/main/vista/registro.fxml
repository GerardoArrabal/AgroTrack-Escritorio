<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Accordion?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane xmlns:fx="http://javafx.com/fxml" fx:controller="controlador.ControladorRegistro" style="-fx-background-color: linear-gradient(to bottom, #08301b, #0d4528);" prefWidth="600" prefHeight="520">
    <children>
        <VBox spacing="18" alignment="TOP_CENTER" style="-fx-background-color: #ffffff; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.12), 20, 0, 0, 10);" maxWidth="520">
            <children>
                <VBox alignment="CENTER">
                    <children>
                        <Label text="Crear cuenta AgroTrack" style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #0d4528;" />
                        <Label text="Completa tu información para comenzar a gestionar tus fincas" style="-fx-text-fill: #5f6b6f;" />
                    </children>
                </VBox>

                <Accordion expandedPane="$paneDatosPersonales">
                    <panes>
                        <TitledPane fx:id="paneDatosPersonales" text="1. Datos personales">
                            <content>
                                <GridPane hgap="10" vgap="12" padding="10">
                                    <columnConstraints>
                                        <ColumnConstraints prefWidth="150" />
                                        <ColumnConstraints prefWidth="280" />
                                    </columnConstraints>
                                    <children>
                                        <Label text="Nombre(s):" GridPane.rowIndex="0" />
                                        <TextField fx:id="campoNombre" promptText="Ej. Ana María" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                                        <Label text="Apellidos:" GridPane.rowIndex="1" />
                                        <TextField fx:id="campoApellidos" promptText="Ej. Gómez Ruiz" GridPane.rowIndex="1" GridPane.columnIndex="1" />

                                        <Label text="Correo electrónico:" GridPane.rowIndex="2" />
                                        <TextField fx:id="campoCorreo" promptText="correo@dominio.com" GridPane.rowIndex="2" GridPane.columnIndex="1" />

                                        <Label text="Nombre de usuario:" GridPane.rowIndex="3" />
                                        <TextField fx:id="campoUsername" promptText="usuario.agro" GridPane.rowIndex="3" GridPane.columnIndex="1" />

                                        <Label text="Rol:" GridPane.rowIndex="4" />
                                        <ComboBox fx:id="comboRol" GridPane.rowIndex="4" GridPane.columnIndex="1" promptText="Selecciona rol">
                                            <items>
                                                <FXCollections fx:factory="observableArrayList">
                                                    <String fx:value="Administrador" />
                                                    <String fx:value="Agricultor" />
                                                </FXCollections>
                                            </items>
                                        </ComboBox>

                                        <Label text="Fecha de registro:" GridPane.rowIndex="5" />
                                        <DatePicker fx:id="pickerFechaRegistro" GridPane.rowIndex="5" GridPane.columnIndex="1" />
                                    </children>
                                </GridPane>
                            </content>
                        </TitledPane>

                        <TitledPane text="2. Seguridad y acceso">
                            <content>
                                <GridPane hgap="10" vgap="12" padding="10">
                                    <columnConstraints>
                                        <ColumnConstraints prefWidth="150" />
                                        <ColumnConstraints prefWidth="280" />
                                    </columnConstraints>
                                    <children>
                                        <Label text="Contraseña:" GridPane.rowIndex="0" />
                                        <PasswordField fx:id="campoContrasena" promptText="Mín. 8 caracteres" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                                        <Label text="Confirmar contraseña:" GridPane.rowIndex="1" />
                                        <PasswordField fx:id="campoContrasenaConfirmacion" promptText="Repite la contraseña" GridPane.rowIndex="1" GridPane.columnIndex="1" />

                                        <CheckBox fx:id="checkTerminos" text="Acepto los términos y condiciones" GridPane.rowIndex="2" GridPane.columnSpan="2" />
                                    </children>
                                </GridPane>
                            </content>
                        </TitledPane>

                        <TitledPane text="3. Finca principal (opcional)">
                            <content>
                                <VBox spacing="10" padding="10">
                                    <children>
                                        <CheckBox fx:id="checkCrearFinca" text="Crear una finca inicial para este usuario" />
                                        <GridPane hgap="10" vgap="12" disable="${!checkCrearFinca.selected}">
                                            <columnConstraints>
                                                <ColumnConstraints prefWidth="150" />
                                                <ColumnConstraints prefWidth="280" />
                                            </columnConstraints>
                                            <children>
                                                <Label text="Nombre de la finca:" GridPane.rowIndex="0" />
                                                <TextField fx:id="campoFincaNombre" promptText="Ej. Finca Las Lomas" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                                                <Label text="Ubicación:" GridPane.rowIndex="1" />
                                                <TextField fx:id="campoFincaUbicacion" promptText="Municipio, provincia" GridPane.rowIndex="1" GridPane.columnIndex="1" />

                                                <Label text="Superficie (ha):" GridPane.rowIndex="2" />
                                                <TextField fx:id="campoFincaSuperficie" promptText="0.00" GridPane.rowIndex="2" GridPane.columnIndex="1" />

                                                <Label text="Tipo de suelo:" GridPane.rowIndex="3" />
                                                <ComboBox fx:id="comboFincaSuelo" GridPane.rowIndex="3" GridPane.columnIndex="1" promptText="Selecciona tipo">
                                                    <items>
                                                        <FXCollections fx:factory="observableArrayList">
                                                            <String fx:value="Arcilloso" />
                                                            <String fx:value="Arenoso" />
                                                            <String fx:value="Franco" />
                                                            <String fx:value="Calcáreo" />
                                                        </FXCollections>
                                                    </items>
                                                </ComboBox>

                                                <Label text="Coordenadas/Notas:" GridPane.rowIndex="4" />
                                                <TextArea fx:id="areaFincaNotas" prefRowCount="2" promptText="Coordenadas del polígono o notas iniciales" GridPane.rowIndex="4" GridPane.columnIndex="1" />
                                            </children>
                                        </GridPane>
                                    </children>
                                </VBox>
                            </content>
                        </TitledPane>
                    </panes>
                </Accordion>

                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <children>
                        <Button text="Volver al login" fx:id="btnVolverLogin" onAction="#volverAlLogin" style="-fx-background-color: transparent; -fx-border-color: #0d4528; -fx-text-fill: #0d4528;" />
                        <Button text="Crear cuenta" fx:id="btnRegistrar" onAction="#registrarUsuario" style="-fx-background-color: #0d4528; -fx-text-fill: white;" />
                    </children>
                </HBox>
            </children>
            <padding>
                <Insets top="30" right="35" bottom="30" left="35" />
            </padding>
        </VBox>
    </children>
</StackPane>

